<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <!-- 나는 맵퍼다 선언 -->
 <mapper namespace="UserMapper">
 	<resultMap type="User" id="userResultMap">
		<id property="userId" column="USER_ID"/>
		<result property="userPwd" column="USER_PWD"/>
		<result property="userName" column="USER_NAME"/>
		<result property="userPhone" column="USER_PHONE"/>
		<result property="userEmail" column="USER_EMAIL"/>
		<result property="userBirth" column="USER_BIRTH"/>
		<result property="userPhotoName" column="USER_PHOTO_NAME"/>
		<result property="userPhotoRename" column="USER_PHOTO_RENAME"/>
		<result property="userPhotoPath" column="USER_PHOTO_PATH"/>
		<result property="uEnrollDate" column="U_ENROLL_DATE"/>
		<result property="uStatus" column="U_STATUS"/>
	</resultMap>
	
	<insert id="insertUser" parameterType="User"> 
		INSERT INTO USER_TBL VALUES(#{userId}, #{userPwd}, #{userName}, #{userPhone}, #{userEmail}, #{userBirth}, '', '', '', DEFAULT, DEFAULT) 
	</insert>
	
	<select id="selectLogin" resultMap="userResultMap"> 
		SELECT USER_ID, USER_NAME FROM USER_TBL WHERE USER_ID = #{userId} AND USER_PWD = #{userPwd} AND U_STATUS = 'Y' 
	</select>
	
	<select id="selectOneUser" resultMap="userResultMap"> 
		SELECT USER_ID, USER_PWD, USER_NAME, USER_PHONE, USER_EMAIL, USER_BIRTH FROM USER_TBL WHERE USER_ID = #{userId} 
	</select>
	
	<update id="deleteUser"> 	
		UPDATE USER_TBL SET U_STATUS = 'N' WHERE USER_ID = #{userId } 
	</update>
	
	<update id="updateUser"> 
		UPDATE USER_TBL SET USER_PWD = #{userPwd}, USER_PHONE = #{userPhone} WHERE USER_ID = #{userId} 	
	</update>
	
	<!-- admin에서 회원목록 출력합니다. -->
	<select id="selectAllUser" resultMap="userResultMap">
		SELECT * FROM USER_TBL ORDER BY U_ENROLL_DATE DESC
	</select>
	
 </mapper>